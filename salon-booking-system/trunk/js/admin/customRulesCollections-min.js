"use strict";function sln_bindRemoveFunction(){return jQuery(this).parent().parent().parent().remove(),!1}function sln_bindRemove(){jQuery('button[data-collection="remove"]').off("click",sln_bindRemoveFunction).on("click",sln_bindRemoveFunction)}function sln_bindDisableSecondShift(){jQuery(".sln-disable-second-shift input").off("change",sln_bindDisableSecondShiftFunction).on("change",sln_bindDisableSecondShiftFunction)}function sln_bindDisableSecondShiftFunction(){jQuery(this).closest(".sln-booking-rule").find(".sln-second-shift .slider-time-input-from, .sln-second-shift .slider-time-input-to").prop("disabled",jQuery(this).prop("checked"))}function sln_initBookingRules(e){var t=e.find('div[data-collection="prototype"]'),i=e.find(".sln-booking-rules-wrapper"),n=t.html(),s=t.data("count");t.remove(),jQuery('button[data-collection="addnew"]',e).on("click",(function(t){s++,t.preventDefault(),i.append(n.replace(/__new__/g,s)),sln_bindRemove(),sln_bindDisableSecondShift(),jQuery(".sln_datepicker div").on("changeDay",(function(){jQuery("body").trigger("sln_date")})),setTimeout((()=>{jQuery(".datetimepicker-days table tr th.next").on("click",(function(){jQuery("body").trigger("sln_date");var e=jQuery(this).closest(".sln-select-specific-dates-calendar").find('input[name*="specific_dates"]').val().split(",");e=e.filter((function(e){return e}));var t=jQuery(this).closest(".sln_datepicker").find('div[name*="specific_dates"]');setTimeout((function(){t.find(".day.active").removeClass("active"),e.forEach((function(e){t.find('.day[data-ymd="'+e+'"]').addClass("active")}))}))})),jQuery(".datetimepicker-days table tr th.prev").on("click",(function(){jQuery("body").trigger("sln_date");var e=jQuery(this).closest(".sln-select-specific-dates-calendar").find('input[name*="specific_dates"]').val().split(",");e=e.filter((function(e){return e}));var t=jQuery(this).closest(".sln_datepicker").find('div[name*="specific_dates"]');setTimeout((function(){t.find(".day.active").removeClass("active"),e.forEach((function(e){t.find('.day[data-ymd="'+e+'"]').addClass("active")}))}))}))}),0),sln_initSelectSpecificDates(),sln_initSelectSpecificService(),sln_initDatepickers(jQuery),sln_initTimepickers(jQuery),sln_customSliderRange(jQuery,jQuery(".slider-range")),jQuery("[data-unhide]",e).trigger("change"),jQuery(".sln-booking-rule:last-child .sln-checkbutton input",e).prop("checked",!0)})),sln_bindRemove(),sln_bindDisableSecondShift(),sln_initSelectSpecificService()}function sln_initBookingHolidayRules(e){var t=e.find('div[data-collection="prototype"]'),i=t.html(),n=t.data("count"),s=e.find(".sln-booking-holiday-rules-wrapper");t.remove(),jQuery('button[data-collection="addnewholiday"]',e).on("click",(function(e){e.preventDefault(),s.append(i.replace(/__new__/g,n)),n++,sln_initDatepickers(jQuery),sln_initTimepickers(jQuery),sln_bindRemove()})),sln_bindRemove()}function sln_toggleSecondShift(e){jQuery(this).prop("checked")?(jQuery(this).parent().parent().parent().find('input[name="salon_settings[availabilities][1][from][1]"],input[name="salon_settings[availabilities][1][to][1]"]').attr("disabled","disabled"),jQuery(this).parent().parent().parent().find(".sln-slider-wrapper-second-shift").removeClass("sln-slider--disabled").removeAttr("hidden").find(".sln-slider__inner").hide()):(jQuery(this).parent().parent().parent().find(".sln-slider-wrapper-second-shift").find('input[name="salon_settings[availabilities][1][from][1]"],input[name="salon_settings[availabilities][1][to][1]"]').removeAttr("disabled"),jQuery(this).parent().parent().parent().find(".sln-slider-wrapper-second-shift").addClass("sln-slider--disabled").find(".sln-slider__inner").show())}function sln_initSelectSpecificDates(e){jQuery(".sln-select-specific-dates-calendar .sln_datepicker > div").each((function(){var e=jQuery(this);if(!jQuery(e).hasClass("started")){var t=[];jQuery(e).data("availability-dates").forEach((function(e,i){Array.isArray(e)&&!e.length&&t.push(i)}));var i=jQuery(e).addClass("started").datetimepicker({format:jQuery(e).data("format"),weekStart:jQuery(e).data("weekstart"),autoclose:!0,minView:2,maxView:4,language:jQuery(e).data("locale"),daysOfWeekDisabled:t}).on("show",(function(){jQuery("body").trigger("sln_date")})).on("place",(function(){jQuery("body").trigger("sln_date")})).on("changeMonth",(function(){jQuery("body").trigger("sln_date")})).on("changeYear",(function(){jQuery("body").trigger("sln_date")})).data("datetimepicker").picker;jQuery("body").trigger("sln_date");var n=jQuery(this).closest(".sln-select-specific-dates-calendar").find('input[name*="specific_dates"]').val().split(",");n=n.filter((function(e){return e}));var s=jQuery(this);setTimeout((function(){s.find(".day.active").removeClass("active"),n.forEach((function(e){s.find('.day[data-ymd="'+e+'"]').addClass("active")}))})),i.addClass(jQuery(e).data("popup-class"))}}))}function sln_initSelectSpecificService(e){jQuery(".sln-select select").not("#_sln_attendant_availabilities___new___day_specific_service, #_sln_attendant_availabilities___new___day_specific_resource").each((function(){jQuery(this).parent().find("span.select2.select2-container.select2-container--sln").remove()})).select2({containerCssClass:"sln-select-rendered "+(jQuery(this).attr("data-containerCssClass")?jQuery(this).attr("data-containerCssClass"):""),dropdownCssClass:"sln-select-dropdown",theme:"sln",width:"100%",templateResult:function(e){return e.id?jQuery('<span data-value="'+e.id+'">'+e.text+"</span>"):e.text},placeholder:jQuery(this).data("placeholder")}),jQuery(".sln_attendant_day_service select").not("#_sln_attendant_availabilities___new___day_specific_service").on("select2:open",(function(){let e=jQuery("#_sln_attendant_services").val();e=e.map((e=>e.split("_").pop()));let t,i=Number(jQuery(this).closest(".row.sln-select-specific-dates-calendar").find(".sln_attendant_day_resource select").val());jQuery(this).find("option").not('option[value="0"]').each((function(n,s){t=jQuery(s).data("resources").split(",").includes(String(i)),console.log(e.length&&e.includes(s.value)&&i&&t,e.length&&!i&&e.includes(s.value),!e.length&&i&&t,!e.length&&!i),e.length&&e.includes(s.value)&&i&&t||e.length&&!i&&e.includes(s.value)||!e.length&&i&&t||!e.length&&!i?(s.removeAttribute("disabled"),setTimeout((function(e,t){t=(t=jQuery("#select2-_sln_attendant_availabilities_1_day_specific_service-results li").filter((function(){return jQuery(this).attr("id")&&e.value==jQuery(this).attr("id").split("-").pop()}))).length?jQuery(t).removeAttr("style").removeAttr("aria-disabled").attr("aria-selected",!1):t}),1,s,null),console.log("enable",s.value)):(s.setAttribute("disabled","disabled"),setTimeout((function(e,t){t=(t=jQuery("#select2-_sln_attendant_availabilities_1_day_specific_service-results li").filter((function(){return jQuery(this).attr("id")&&e.value==jQuery(this).attr("id").split("-").pop()}))).length?jQuery(t).css("display","none").attr("aria-disabled",!0).removeAttr("aria-selected"):t}),1,s,null),console.log("disable",s.value))})),jQuery(this).trigger("change")}))}jQuery((function(){jQuery(".sln-booking-rules").each((function(){sln_initBookingRules(jQuery(this))})),jQuery(".sln-booking-holiday-rules").each((function(){sln_initBookingHolidayRules(jQuery(this))})),jQuery("body").on("change","[data-unhide]",(function(){jQuery(jQuery(this).data("unhide")).toggle(!jQuery(this).is(":checked")),jQuery(this).is(":checked")?(console.log("checked"),jQuery(jQuery(this).data("unhide")).removeClass("sln-box--appeared")):(console.log("not checked"),jQuery(jQuery(this).data("unhide")).addClass("sln-box--appeared"))})),jQuery("[data-unhide]").trigger("change"),jQuery("body").on("change",".sln-disable-second-shift input",sln_toggleSecondShift),jQuery(".sln-disable-second-shift input").trigger("change"),jQuery("body").on("change",".sln-select-specific-dates input",(function(){jQuery(this).prop("checked")?(jQuery(this).closest(".sln-booking-rule").find(".sln-checkbutton-group").addClass("hide"),jQuery(this).closest(".sln-booking-rule").find(".sln-select-specific-dates-calendar").removeClass("hide")):(jQuery(this).closest(".sln-booking-rule").find(".sln-checkbutton-group").removeClass("hide"),jQuery(this).closest(".sln-booking-rule").find(".sln-select-specific-dates-calendar").addClass("hide"))})),jQuery("body").on("sln_date",(function(){setTimeout((function(){jQuery(".datetimepicker-days table tr td.day").on("click",(function(){if(!jQuery(this).hasClass("disabled")&&jQuery(this).closest(".sln-select-specific-dates-calendar").length){var e=jQuery(this).attr("data-ymd"),t=jQuery(this).closest(".sln-select-specific-dates-calendar").find('input[name*="specific_dates"]').val().split(",");(t=t.filter((function(e){return e}))).indexOf(e)>-1?t=t.filter((function(t){return t!==e})):t.push(e),jQuery(this).closest(".sln-select-specific-dates-calendar").find('input[name*="specific_dates"]').val(t.join(","));var i=jQuery(this).closest(".sln_datepicker").find('div[name*="specific_dates"]');setTimeout((function(){i.find(".day.active").removeClass("active"),t.forEach((function(e){i.find('.day[data-ymd="'+e+'"]').addClass("active")}))}))}}))}))})),jQuery(".sln_datepicker div").on("changeDay",(function(){jQuery("body").trigger("sln_date")})),setTimeout((()=>{jQuery(".datetimepicker-days table tr th.next").on("click",(function(){jQuery("body").trigger("sln_date");var e=jQuery(this).closest(".sln-select-specific-dates-calendar").find('input[name*="specific_dates"]').val().split(",");e=e.filter((function(e){return e}));var t=jQuery(this).closest(".sln_datepicker").find('div[name*="specific_dates"]');setTimeout((function(){t.find(".day.active").removeClass("active"),e.forEach((function(e){t.find('.day[data-ymd="'+e+'"]').addClass("active")}))}))})),jQuery(".datetimepicker-days table tr th.prev").on("click",(function(){jQuery("body").trigger("sln_date");var e=jQuery(this).closest(".sln-select-specific-dates-calendar").find('input[name*="specific_dates"]').val().split(",");e=e.filter((function(e){return e}));var t=jQuery(this).closest(".sln_datepicker").find('div[name*="specific_dates"]');setTimeout((function(){t.find(".day.active").removeClass("active"),e.forEach((function(e){t.find('.day[data-ymd="'+e+'"]').addClass("active")}))}))}))}),0),sln_initSelectSpecificDates()}));